Transcript




close interactive script
Click one of the buttons to take you to that part of the video.
1. Exploring Penetration Testing Tools
00:05
In this demonstration, we're going to look at penetration
00:08
testing tools that you can use to evaluate the security of
00:10
your network or a particular host on your network.<br>
00:14
As you probably know, Linux is a very popular
00:17
platform for testing network and host security.
00:20
First, you need to choose a Linux distribution
00:22
that you can use for penetration testing.
00:26
A good place to start looking for those
00:28
distributions is the DistroWatch website.
00:31
Many of the Linux distributions here can be run
00:34
as a live CD or installed on the hard drive.
00:37
A live CD is an optical disc or a bootable USB drive
00:41
that has the Linux operating system installed on it.
00:44
It can also have many of the security tools
00:47
you need to perform a penetration test.<br>
00:50
Because it's installed on a USB drive or an
00:52
optical disc, you can insert that into the
00:55
computer and boot the system off the disc.
00:58
When you do, you'll have a Linux operating system
01:00
up and running with the tools you need for testing.<br>
01:03
There are several advantages
01:05
associated with testing this way.
01:07
First, there's a wide variety of free
01:09
penetration testing tools available for the Linux
01:12
operating system, and if you're using a LiveCD,
01:15
you don't have to install an operating system.<br>
01:18
If you're booting off an optical disc,
01:20
there's no way for malware or anything else
01:23
to actually affect the files on the disc.
01:26
There are many different distributions available.
01:28
You can see their names here.
01:29
You can also see the purpose of
01:32
the distribution listed over here.
01:34
Since we're interested in security,
01:36
let's go over here and look at this one.<br>
2. Kali Linux and Parrot Linux
01:39
The most popular and well-accepted distribution
01:42
for security and penetration testing is Kali Linux.
01:46
Let's go ahead and click on that and see what we can learn.
01:49
It tells us where the home page
01:51
is and a lot of other information.
01:53
I have its home page open in another tab, up here.
01:56
We can read a little bit more and see what tools
01:59
are actually included on this distribution.
02:02
I'm going to go to the Download page.
02:07
I see the latest version right here, Kali Linux 64-Bit.
02:11
Over here, I can see the checksum, or hash value.<br>
02:14
Now, I already have a copy of
02:16
Kali downloaded and ready to go.
02:18
We'll get to that in a minute.
02:20
But I want to go back to DistroWatch.
02:22
I'll go back to the previous page.
02:25
I just want to point out that there's another
02:27
Linux distribution called Parrot Linux.
02:30
Parrot is a distribution with a collection of
02:32
various utilities that are popular with penetration
02:35
testers and computer forensic professionals.
02:38
Here's the link to the home page,
02:40
but I already have a tab opened up.
02:42
Down here, you can read more about the
02:44
project and learn about the different tools.
02:47
Now back to Linux.<br>
3. Kali Install and Tools
02:49
My Kali Linux ISO image is
02:51
downloaded, and I've booted it up.
02:53
Now it's asking me now if I want to install
02:56
it to disc or just use it as a LiveCD.
02:58
I'll go ahead and say, "Sure, go
02:58
ahead and just use it as a LiveCD."<br>
03:03
We'll let it launch, and pretty soon,
03:05
we'll see the graph called User Interface.
03:08
Each Linux distribution has its own set of package tools.
03:12
This one specializes in security tools.<br>
03:15
Here are some of the tools that Kali
03:16
Linux has packaged with its distribution.
03:19
Over here, you'll see the Metasploit Framework Armitage
03:23
(which is a graphical user interface for that framework),
03:26
Burp Suite, BeEF Cross-Site Scripting Framework, and some
03:29
others that we could use to do our penetration testing.<br>
03:33
Now, obviously, we don't have time in this short
03:35
video to really discuss penetration testing or even
03:39
look at a specific tool in-depth, but I'll show you
03:42
how you could penetration test using one of the
03:44
pre-packaged tools that we can launch from a LiveCD.<br>
4. Metasploit Framework
03:48
Let's start the Metasploit Framework by clicking on it.
03:51
That's going to create the database where we're going to
03:54
save some of the information about hosts and other things.
03:58
Once that's done, I'll go ahead and bring up Armitage,
04:01
which is the graphical user interface that we can use
04:04
to easily interact with the extensive commands that
04:07
exist as part of the Metasploit framework.<br>
04:10
It looks like that's launched now, and
04:12
we'll go ahead and launch Armitage.
04:15
There it is.
04:16
We'll connect, and it asks us if we want to
04:19
start the remote procedure called Server.
04:21
We'll say, "Sure, that'll be great.
04:23
It'll connect us up to the database."
04:25
It takes just a minute to make those connections.<br>
04:28
It looks like it made the connection,
04:30
and it'll launch here shortly.
04:33
We're greeted with several different
04:34
windows and several different options.
04:37
Essentially, what we need to do is tell Armitage
04:40
(and, in conjunction, the Metasploit Framework) which
04:43
hosts we want to actually try to launch an attack on.
04:47
We could use an Nmap scan to import that information.
04:51
We could also use the Metasploit Framework scan,
04:53
which will go out and ping the different machines
04:56
in a certain subnet and gather information.<br>
04:59
In this case, I'm going to keep it simple so
05:01
we don't scan all the hosts on our network, and
05:04
I'll just add a single host, a vulnerable Linux
05:07
virtual machine that I have on the network.
05:09
I know it's on the IP ending in .102.
05:13
Now click Add and then OK.
05:16
It says that it added it, and we've identified a host.
05:19
However, we don't have much information about it yet.<br>
5. Open Ports
05:22
But if I right-click on that host, I can scan it.
05:26
Now it'll look for all the open ports, and you can
05:29
see a variety of open ports that are coming up.
05:32
We can also request additional information about
05:35
services that might be running and on specific ports.<br>
05:39
So you can see here that we have certain ports, but
05:42
we don't know much about the services quite yet.<br>
6. MSF Scan
05:45
If we wanted to, we could try to
05:47
gather some additional information.
05:49
Let's do an MSF scan on that host, and that
05:52
will try to identify some information about
05:54
the operating system that's running on it.
05:57
You'll notice that every time we run a command
05:59
it launches a separate window down here, so you
06:02
could go along and close these out as you go.<br>
06:05
We know some information about this
06:07
computer--some of the ports that are open,
06:09
some of the services that may be running, etc.
06:12
It's not a lot of data, but Metasploit keeps
06:15
track of the vulnerabilities based on the ports
06:17
that are open, the services that are running,
06:20
the operating system that's running, and so on.
06:23
You can come up here, and you can actually find attacks
06:26
specific to the host that you've already discovered.
06:29
We'll let it go through its database and find
06:31
specific exploits that it might want to try.<br>
7. Specific Exploit
06:35
So, that's complete.
06:37
Now we could go through the attack
06:39
menu and look for a specific exploit.
06:42
You'll see here that, based on the ports
06:44
that it found, it said, "Hey, FTP's open.
06:47
Go ahead and try these exploits."<br>
06:49
Each of these exploits will run the specific
06:52
exploit when you click on them, and you have
06:54
to provide specific values for the exploit.
06:57
We don't actually know if any of these
06:59
attacks will run, so the ability to check on
07:02
that is built into the Metasploit framework.
07:05
Some of the exploits have the ability to
07:07
use this check; others are older and don't.<br>
07:11
Let's try doing a check on some of these right now.
07:18
It says this one doesn't support the check, this
07:21
specific vulnerability is not exploitable, not
07:22
exploitable, doesn't support the check, and so on.
07:27
For the ones that don't support the check, we'd have
07:30
to go through and try each of them individually.<br>
8. Hail Mary
07:33
Now, generally, as you're looking at an
07:35
organization and trying to compromise hosts within
07:38
it, you don't want to make a lot of noise or cause
07:41
a lot of traffic on the network, so you try these
07:44
very specific attacks based on what you discover.
07:48
However, there is an option inside of Armitage
07:50
(and, subsequently, Metasploit) that lets you
07:53
do what's known as the Hail Mary, and that is
07:55
just try out every single attachment possible.
07:59
In the interest of time, rather than going through
08:01
every single one of these attacks in a systematic
08:04
way, we'll do the noisy attack because I want to
08:07
show you how you can compromise the mission, and
08:09
we'll see which vulnerabilities actually exist.<br>
08:13
If we click on Hail Mary here, then it says,
08:15
"Hey, are you sure you want to do this?
08:17
There's going to be a flood of exploits, and it's kind of
08:20
noisy. We'll say yes, that's what we intend to do, and
08:23
then it'll go through that database of exploits and try to
08:27
run them with a variety of different payloads so that it's
08:30
trying to establish a connection to that remote machine.
08:33
We'll let it do its thing here for a minute.<br>
08:42
It went through the database, and now
08:44
it's launching each of those exploits.
08:46
You'll see that the exploits are going to certain
08:49
ports based on the services that are running on those.
08:52
We'll give it another minute here, and it'll
08:54
start taking advantage of some of those exploits.<br>
9. Exploit Found
08:58
Oh look, our icon changed.
09:00
That means we actually have a connection.
09:03
And once it made the connection, it gathered
09:05
some additional information and says, "Yep, this
09:08
is definitely a Linux box." We can see what
09:10
version of Linux and some other information, too.<br>
09:14
Once we have a session, we can gather all sorts of data.
09:17
We can get the dump of the passwords and the hashes
09:20
associated with the passwords and then try to crack those.
09:23
Maybe we compromise the accounts and get more
09:26
straightforward access, but there's all of these
09:29
different sessions that we could establish based
09:31
on the different exploits that we just ran.
09:33
Again, usually, you wouldn't do the
09:35
Hail Mary because it's too noisy.
09:37
But in this case, it's a quick and easy demonstration of
09:40
the vulnerabilities that exist on this specific machine.<br>
09:44
If we scroll down here, we'll see a variety
09:46
of exploits that exist for this machine, and
09:49
we'll give ourselves a little bit more space.
09:52
You can see, as we scroll up, that it looks
09:54
like there's a PHP exploit, PHP CGI injection.
09:58
There's a user map, a Samba exploit, another
10:01
Samba exploit, and several others that actually
10:04
allowed us to have a session over to that machine.<br>
10:08
Let's go ahead and open a new console session.
10:11
I'll adjust these windows so we can see better.
10:15
We can run the sessions command, and you'll see that we
10:18
currently have four sessions connecting from our machine.
10:21
I know that's this IP address to this
10:23
vulnerable machine, right there, through
10:26
PHP, and then through some command lines.<br>
10:28
Let me go ahead and connect to one
10:31
of these sessions interactively.
10:33
We'll choose Session 2, and now
10:35
I've got a Linux command prompt.
10:37
I can do things like list the file system.
10:39
I can say, "Who am I?" If you look
10:41
at the bottom here, I have root access.
10:44
With that access, I could grab the hashes for the passwords.
10:47
I could execute any commands.
10:50
I could set up additional back doors.
10:52
I could do all sorts of things.<br>
10. Summary
10:54
Penetration testing is awesome, and ultimately, we're trying
10:58
to compromise systems so that we know how to lock them down.
11:01
To do that, we often use these pre-packaged
11:04
tools that come with the distribution.
11:06
Kali Linux along with Metasploit and
11:08
Armitage already pre-packaged is a fantastic
11:12
tool to use for penetration testing.<br>
11:15
That's it for this demonstration.
11:17
In this demo, we talked about penetration testing
11:19
tools, and then we talked about the concept of a
11:22
LiveCD and looked at a couple of Linux distributions
11:25
that you could download and use in your testing.<br>