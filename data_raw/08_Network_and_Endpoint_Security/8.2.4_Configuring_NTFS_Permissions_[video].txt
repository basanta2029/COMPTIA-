
Transcript




close interactive script
Click one of the buttons to take you to that part of the video.
1. Configuring NTFS Permissions
00:04
In this demonstration, we're going to
00:05
practice configuring NTFS permissions.
00:07
NTFS permissions let you control
00:11
access to the Windows file system.
00:13
Let's open our file browser on this Windows
00:15
server system and go to our computer (or, as
00:18
they call it in 2019 and Windows 10, This PC).
00:22
Let's go to the Data volume.
00:23
It has two subfolders here, one called
00:26
Documents, and one called Reports.<br>
2. NTFS Permissions at the Volume Level
00:28
First, let's set NTFS permissions at the volume level.
00:32
To do this, we right-click on the
00:34
Data volume and select Properties.
00:36
Then we need to select the Security tab, and we
00:39
see a list of users and groups that have been
00:41
given some level of access to the Data volume.<br>
00:44
So, if we select a particular user or group, such
00:48
as the Everyone group, we see the permissions that
00:50
are assigned to this group below.
00:53
The permissions that we see in this
00:54
example are default permissions.
00:57
They were automatically assigned
00:58
to this volume when it was created.<br>
01:01
The security principles that you see and the permissions
01:04
that have been assigned to each one of these principles
01:06
were assigned by default, so the Windows system assigned
01:09
them when the data volume was originally created.
01:12
For example, when the Users group was created, it was
01:15
granted Read &amp; Execute, List Folder Contents, and Read.
01:19
But you can see it wasn't granted Full Control.<br>
01:22
The Administrators group was granted
01:24
Full Control and all the other rights.
01:27
Members of the Administrators group were
01:29
assigned Full Control to this volume.
01:31
So members of the Administrators group can do whatever
01:34
they want to the files and folders on the Data volume.<br>
01:38
If a user doesn't have Full Control, Modify, or
01:41
Read &amp; Execute, then they're only allowed to read
01:44
and see what's inside the folder and open files,
01:47
but not necessarily create or delete them.
01:50
Basically, they're not allowed to make any changes to a file
01:53
because they don't have the rights and privileges to modify.<br>
3. Use Groups Instead of Individual Users
01:56
Using groups to assign NTFS permissions is a good practice.
02:00
Using groups instead of individual users makes
02:03
administration of the NTFS file system a lot easier.
02:07
If changes happen in the organization, then
02:10
all you have to do is modify group membership.
02:12
So, instead of making specific permission
02:15
assignments for individual users, like this user
02:18
here, you can just remove them from that specific
02:20
group, and they lose membership immediately.<br>
02:23
Or, if you have a new employee or a new person
02:26
in the organization that you need to give access
02:28
to, you can just add them to that group, and
02:30
it'll add the rights that group has access to.<br>
4. Add a New Group
02:34
So, let's add a new group to the
02:35
list of security principles here.
02:38
We're going to click Edit and Add.
02:40
If you don't know the name, you
02:41
can click Advanced and Find now.
02:44
This will show you every user and
02:46
group listed in Active Directory.<br>
02:48
Let's type —�data'.
02:50
It's beneficial to name your groups in a
02:52
convention that suits you for easy tracking.
02:55
As you can see, this organization used Data as the
02:58
data drive, Documents for the documents folder, and
03:01
Write to allow write access to that folder.
03:04
Let's select data.all group, since that group
03:07
describes access to the whole data volume.<br>
03:10
Now we can assign users to the data.all group
03:13
to allow them write and modify privileges.
03:15
So, by default, this group receives the Read &amp; Execute
03:19
permissions, which allow them to execute executable files.
03:23
They can also list folder contents and read those files.
03:26
They can open them up and view the contents.
03:29
But they're not allowed to modify or make
03:31
any changes to those files because they
03:33
don't have the Modify or Write permissions.<br>
03:36
We need to get the users in the data.all
03:39
group more access to this volume.
03:41
Let's grant them the Modify permission.
03:43
That causes them to have the Write permission automatically.
03:47
We're not going to give them Full
03:48
Control, so let's click OK and OK.<br>
03:53
We assigned those permissions at the volume level.
03:56
Let's go into the Data volume and view how the permissions
03:59
that we assigned affect the subfolders of the data volume.
04:03
We're going to double-click Data volume.
04:05
Let's right-click on Documents and go to Properties.
04:08
We're going to the Security tab again.
04:11
The Data.all group, here, is now a
04:13
security principal of this group as well.
04:16
So, basically, any users who are members of
04:19
the Data.all group will receive Modify, Read
04:22
&amp; Execute, List Folder Contents, Read, and
04:26
Write permissions to the Documents folder.<br>
04:28
But there's something different about these check marks.
04:31
Previously, the check marks were black for the
04:33
permissions assigned to the data.all group.
04:36
In the Documents folder, they're greyed out.
04:39
Whenever you see grey check marks on the Security
04:41
tab in the permissions, that indicates that the
04:44
permissions aren't explicitly assigned to this
04:47
group on the folder level; they're being inherited
04:50
from the Data volume or from the folder above them.<br>
04:53
So, we assigned the permissions to the volume itself.
04:56
Because Documents is in a subfolder of Data,
04:59
it automatically inherited the same permission
05:02
assignments that were assigned to the volume.
05:04
Inheritance makes permissions easier
05:06
for system administrators to manage.
05:08
And using inheritance, we assign the most
05:11
common set of permissions that we want most
05:13
of our users to have at the volume level.
05:16
In this way, most of our user accounts
05:18
have the permissions they need.
05:20
Then we can set up exceptions for individual users or groups
05:24
who need either more or less access than the average user.<br>
05:28
However, we can change these permissions if necessary.
05:31
You override an inherited permission
05:33
assignment by making an explicit permission
05:35
assignment somewhere lower in the file system.
05:38
For example, suppose we need to change the level of access
05:42
that the Data.all group has to the Documents folder.
05:45
To do this, we make an explicit permission
05:48
assignment for the Data.all group to Documents.
05:51
The assignment we make will override any permissions
05:54
that are being inherited from the Data volume itself.
05:57
First, let's click on Advanced.
05:59
Here, you can see that Data.all is receiving
06:02
its permission assignment by inheritance from
06:04
drive D:, so D: is the root of the data volume.
06:08
To change this, we click Disable inheritance.
06:12
This will warn us that the inheritance permissions
06:14
will no longer propagate down to the Documents folder.<br>
5. Convert Inherited Permissions
06:18
We have to decide how we want to handle the situation.
06:21
We have two options to choose from.
06:23
One is to convert inherited permissions into
06:26
explicit permissions on this object, and the other is
06:29
to remove all inherited permissions from the object.
06:32
So, if we click this option, the gray check marks
06:35
will change to black, allowing us to edit them.
06:37
If we click the other option to remove all
06:40
inherited permissions from this object, we basically
06:43
remove all permissions and start from scratch.<br>
06:46
We're going to use the first option.
06:48
We're going to convert inherited permissions
06:50
into explicit permissions on this object.
06:53
Inheritance is now turned off.
06:55
For now, we're going to click OK.
06:57
The check marks have gone from gray
06:59
to black, and now we can edit them.
07:01
The change that we made applied to all of our
07:03
security principals, not just the Data.all group.
07:07
Let's click another one—"see, they're all black.<br>
07:11
On other operating systems, inheritance can
07:13
be managed on a per-user or per-group basis.
07:17
That's not the case with NTFS.
07:19
We either allow inheritance for all security
07:21
principals, or we turn inheritance off for all
07:24
security principals, which is what we just did here.
07:27
This is why selecting the Convert option is usually best.
07:31
If we had selected the Remove all option, then all of
07:34
the permissions to this folder would have been removed.
07:37
That means we would have to go back and individually
07:39
reassign what rights we wanted them to have.
07:42
There may be situations where that is the
07:44
best option, but in this case, it's not.<br>
07:48
Let's suppose you want to remove the Modify permission for
07:51
the members of the Data.all group to the Documents folder.
07:54
We don't care if the users in the Data.all group have
07:57
Modify permissions to every other folder on the Data
07:59
volume, such as Reports, but we don't want that permission
08:03
to be applied to the Documents folder specifically.
08:06
We can turn that off by clicking Edit,
08:08
selecting the Data.all group, unchecking
08:11
Modify, and then clicking OK and OK.
08:16
The Data.all group still has a Modify
08:19
permission to the Data volume itself because we
08:21
haven't change permissions to the Report folder.
08:25
They could also go in and modify Reports.
08:28
Here, we can see that the Data.all group still
08:31
has the inherited permissions to Reports.
08:34
However, because we used an explicit assignment to
08:36
the Documents folder, the Data.all group no longer
08:39
has the ability to modify permissions to documents.<br>
6. Manage Permissions
08:43
So, let's take a look at how to manage permissions properly.
08:47
It's best practice to use groups to allow
08:49
or deny access, as I mentioned before.
08:52
In this case, we'd like to block Samantha
08:54
Carter from viewing the Reports folder.
08:56
We haven't done this before, so we'll have to
08:58
create a new security group for this purpose.<br>
09:02
In order to do that, we'll go to Server Manager &gt; Tools,
09:05
and click on Active Directory Users and Computers.
09:09
We've made a folder called Sec for all our security groups.
09:12
Let's create a new security group by
09:14
right-clicking and selecting New &gt; Group.
09:18
We want our group name to be —�Data.reports.deny'.
09:22
Let's select Domain Local and click OK.
09:25
Our organization likes to have a description in the
09:28
security group, so let's put a description in there.
09:31
Right-click on data.reports.deny and select Properties.
09:35
In the description field, type
09:36
—�Deny Data Drive Report Access'.<br>
09:42
Next, we're going to click on the Members tab and click Add.
09:45
In the Enter field, type —�Sam' and hit Check names.
09:49
Now the full name of Samantha Carter is populated.
09:52
Click OK and OK.<br>
09:55
Now that the security group is set up, we
09:57
need to add this group to the Reports folder.
10:00
Open the File Explorer, Click the Data drive, and
10:03
right-click the Reports folder and select Properties.
10:06
Under the Security tab, we want to edit permissions.
10:10
Let's click the Add button and type
10:12
—�data.reports.deny' in the Enter field.
10:15
Click Check names to make sure your
10:17
typing is correct and then click OK.<br>
10:20
Instead of the regular Read permissions listed, we're
10:23
going to deny all Read permissions and then click OK.
10:27
Notice that there's a window that pops up saying,
10:30
—You're setting a Deny permissions entry.
10:32
Deny entries take precedence over Allow entries.
10:35
This means that if a user is a member of two groups, one
10:38
that's allowed a permission and another that's denied the
10:41
same permission, the user is denied that permission.
10:44
Do you want to continue?—� Click Yes on the prompt.
10:47
As you can see, the data.reports.deny group
10:51
is set to Deny for all three permissions.
10:53
For example, if Samantha was in both data.reports.write
10:57
and data.reports.deny, she'll be denied access to read.<br>
7. Summary
11:02
And that's it for this demonstration.
11:04
In this demo, we configured NTFS permissions
11:07
in the Windows file system using groups.<br>