
Transcript




close interactive script
Click one of the buttons to take you to that part of the video.
1. Crack Passwords
00:04
All penetration testers and ethical hackers
00:05
need the ability to crack passwords.
00:07
In this demo, we're going to cover some ways
00:09
to crack passwords in Linux and Windows.
2. John the Ripper
00:11
One of the most popular password
00:12
cracking programs is John the Ripper.
00:14
It combines a number of password crackers
00:16
into one package, autodetects password hash
00:19
types, and includes a customizable cracker.
00:22
You can run it against many encrypted password
00:24
formats, including several password hash types
00:26
commonly found in Linux and Windows.
00:28
You can also run John the Ripper against access
00:31
passwords for compressed ZIP files and documents.
00:33
John the Ripper is a command line tool.
00:35
There's also a GUI-based version called Johnny, which
00:38
uses the underlying features of the command line version.
00:41
Both are included with Kali Linux.
00:43
We're going to use the command line version.
00:46
First, we need to open up a terminal.
00:47
Now I want to point out the password file.
00:50
When we do a dictionary attack, our cracking program needs
00:53
a wordlist (a list of potential passwords) to refer to.
00:57
So we need to switch to the folder
00:58
where that password list is stored.
01:00
By default, on Kali Linux, the wordlist
01:02
is located in the /usr/share/john folder.
01:08
To get there, I need to switch to that directory
01:10
by typing 'cd /usr/share/john' and press Enter.
01:18
Now, if I type 'ls', I'll be able
01:20
to see the contents of this folder.
01:23
I'm looking for this file, the password.lst file.
01:24
Now we're going to go back to the root directory.
01:28
I can do that by just typing in 'cd'.
01:30
I like to keep my terminal screen
01:32
cleared off, so I'll 'clear' the screen.
01:35
Next, if I type in 'john', I get a list list some of the
01:37
different options that I can use with John the Ripper.
01:40
If you need to know something about a
01:41
command's syntax, this page might help you out.
3. Crack Linux Passwords
01:44
We're ready to crack our password.
01:46
You might think that passwords would be stored
01:47
in a folder called Passwords, but they're not.
01:50
Linux passwords are kept in the /etc/shadow file.
01:55
So, to crack the passwords on this system, I just
01:57
need to type in 'john /etc/shadow' and press Enter.
02:03
And that only took a few seconds to crack.
02:05
It says it loaded two different
02:07
passwords from two different salts.
02:09
(If you remember, if a hash is salted, that means
02:11
that there's extra data added to the hashes because
02:14
there are two identical passwords being used here.
02:17
Hashes are salted to make passwords unique in the system.)
02:20
Down here, we can see that it found
02:21
the password for the root user.
02:23
Depending on your system, this
02:24
process could take a lot longer.
02:26
My password just happens to be toward the
02:28
top of the list in my password.lst file.
4. Crack Passwords from a Windows Machine
02:31
Now we're going to jump over to a Windows
02:33
system and crack a few passwords from there.
02:36
We're going to look at dictionary attacks,
02:37
which use a dictionary file, and brute force
02:40
attacks, which use every potential combination
02:42
of letters, numbers, and special characters.
02:45
And remember, there are many hybrid attacks
02:47
that mix these techniques in various ways,
02:49
but we're just covering the basics here.
5. Dictionary Attack
02:51
Let's start with a dictionary attack.
02:54
We're going to use Cain, a popular program
02:56
that's also known as Cain and Abel.
02:58
When you install Cain and Abel, Windows
03:00
will give you all types of warning messages.
03:03
You'll have to disable your Windows
03:04
Firewall and your antivirus software.
03:06
Your antivirus will most likely recognize
03:08
Cain and Abel as malicious software and
03:10
quarantine the files required for it to run.
03:13
Once you launch Cain and Abel, you'll
03:15
see all your password cracking tools.
03:18
We're going to go to the Cracker tab, up here.
03:21
We're interested in the LM & NTLM hashes.
03:25
Next, let's go up here and click on this
03:27
plus sign to import hashes from our computer.
03:29
Here, under Add NT Hashes, we can
03:32
add hashes from our local system.
03:34
We can also check this box to include password
03:36
history hashes so that if users are required to
03:39
change passwords every 30 or 45 days, previous
03:42
password hashes are included during the import.
03:46
You can also import hashes from a text file.
03:48
So, if you have access to another system, you could
03:50
potentially collect hashes from that system, dump them
03:53
into a text file, copy them to a USB device, and then
03:56
load them here and attempt to crack the passwords.
03:59
You can also import from a SAM
04:01
database by checking this, here.
04:03
Right now, we're just going to
04:05
import hashes from our local system.
04:07
You can see that it just loaded all the
04:08
local accounts I have on this system.
04:11
If you see "empty" under NT passwords, that
04:13
means that there's no password for that account.
04:16
If that field is blank, that means that
04:18
a password is assigned to the account.
04:20
We're going to use a dictionary attack to see
04:22
if we can retrieve the password for the Mrs.
04:24
Worley account.
04:26
I'm going to right-click on that account, hover
04:28
over Dictionary Attack, and go to NTLM Hashes.
04:32
Now I'm going to go up into this white
04:34
space, right-click, and select Add to list.
04:38
Before I started this demo, I downloaded
04:41
a list of passwords from the internet.
04:43
This file is a list of ten thousand common passwords.
04:46
It's estimated that thirty percent of
04:48
all passwords are included in this list.
04:50
If you look down here, you can see
04:52
that it's going to scan for passwords.
04:54
If we check this box, here, it
04:56
will look for the exact password.
04:57
So, if my password is cat, that's
05:00
what it's going to look for.
05:01
Below that, it will reverse that password--so,
05:03
instead of c-a-t, it would look for t-a-c.
05:07
Double passwords are just a password typed in twice.
05:10
You can also have it search for all-lowercase passwords,
05:13
search for all-uppercase passwords, or even have it put
05:15
in numbers that commonly replace letters in passwords.
05:18
With all these combinations, we're really going to use
05:21
a variation of tens of thousands of different passwords.
05:23
Let's click on Start.
05:25
Depending on your computer's processor, memory, and
05:27
capability, this process can take a very long time.
05:31
To save time, I actually edited that file and
05:33
deleted most of the passwords with this scan.
05:36
You can see that the scan did finish,
05:38
but it didn't find that password.
05:40
That's a good thing; it means my
05:42
password isn't a dictionary word.
05:44
Since that didn't work, let's
05:46
exit and try a brute force attack.
6. Brute Force Attack
05:48
We'll right-click on Mrs.
05:50
Worley's account, hover over Brute-Force
05:52
Attack, and select NTLM Hashes.
05:56
Here's a predefined attack.
05:58
You can see that if I click here, we can add to our options.
06:01
We only have lowercase letters and numbers.
06:03
We also have lowercase with numbers and special characters.
06:06
I have lowercase, uppercase,
06:09
numbers, and special characters.
06:11
I'm going to brute force from one to sixteen characters.
06:15
This system is a virtual machine with a single processor
06:17
and not much memory, so it's going to take a long time.
06:20
Let's click Start and see what happens.
06:23
Down here, on the left, you can see it's going to take years
06:28
to cycle through every variation and crack this password.
06:31
We don't have years and years to wait, so
06:32
let's stop this process and try something else.
06:35
To crack the password faster,
06:36
we need to customize our attack.
06:39
I'll get rid of these characters.
06:39
Let's say I was doing some shoulder
06:42
surfing and happened to see that Mrs.
06:44
Worley was typing in a password, and I noticed
06:46
three things: I saw that she typed 'teache' and
06:51
that she didn't use any letters from u to z.
06:55
I also saw that her password wasn't very long.
06:58
So, we're going to brute force with
06:59
these letters and use 6 or 7 characters.
07:03
We also know the first several letters of our password.
07:06
Of course, you probably wouldn't have all this information.
07:08
But to save time, I've made these adjustments.
07:11
I'll go ahead and click Start, and it
07:13
will attempt to crack this password.
07:15
You can see it's going to take a few minutes to
07:17
complete, so I'll pause the demo and let the attack run.
07:21
Okay, our scan has completed in just under three minutes.
07:24
You can see that the password
07:25
it found was the word "teacher."
07:27
Of course, knowing the first several letters of
07:29
the password, like we did here, isn't common.
07:31
I simplified the attack for time's sake.
07:34
But it's often possible to gather enough information
07:36
to brute force a password in a few days or even hours.
7. Summary
07:39
Okay, that's it for this demo.
07:41
In this demo, we introduced John the Ripper
07:43
and used it to crack a Linux password.
07:45
Then we switched over to a Windows system and used
07:47
Cain and Abel to crack a Windows-based password.
07:50
You can see how, if users leak a little information
07:53
or use easy passwords, hacking tools can get you
07:55
into restricted systems and files in no time.