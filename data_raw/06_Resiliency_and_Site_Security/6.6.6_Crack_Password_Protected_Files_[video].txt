Transcript




close interactive script
Click one of the buttons to take you to that part of the video.
1. Introduction
00:04
Password-protected files are extremely
00:06
common, but they're not 100 percent secure.
00:08
Some files natively support password protection, like PDFs.
00:12
Other types of files are easy to store
00:14
in a password-protected zip archive.
00:16
Today, we're going to extract the password hash from these
00:19
kinds of files and use John the Ripper to crack the hash.
00:22
As a reminder, John the Ripper only works with hashes.
00:25
It doesn't natively know how to work directly with
00:28
password-protected files, so we need to extract the
00:30
hash from the file we're interested in.
2. Crack a Zip Password
00:33
The process of extracting a hash is similar for most files.
00:36
The toolkit provided with John the Ripper
00:38
provides many scripts, but some of them
00:40
aren't included on Kali Linux by default.
00:43
We can obtain these tools by cloning the project from
00:45
GitHub, but I've already downloaded the tools we need.
00:48
Let's extract the hashes from
00:49
the zip file we're interested in.
00:51
I'll open a terminal and go to the Documents directory.
00:54
I'll list the folder contents to see what we have in there.
00:57
I have a file called protected.zip.
01:00
This is the zip file we'll attempt to crack the password on.
01:03
We also have a wordlist that we'll use called words.txt.
01:07
Most tools that exist to help us extract hashes from
01:10
files follow the standard for file type, in this case,
01:13
zip followed by the number 2 and the word "john".
01:16
So, I'll type, 'zip2john'.
01:19
This makes it easier to remember what command we need.
01:23
These tools output the hash straight to the screen, so we
01:26
use the angle bracket to redirect that output to a file.
01:29
We will finish our command with 'protected.zip > ziphash'.
01:33
Now that we have the hash for the zip
01:35
file, we can crack it with John the Ripper.
01:37
We need to specify the format of the hash, the file name,
01:41
and the wordlist we want to facilitate cracking the hash.
01:44
So, I'll type, 'john - -format=pkzip
01:48
ziphash - -wordlist=words.txt'.
01:53
We have the password.
01:54
It's a variation of the word password.
01:56
Now, let's extract the zipped file with that password!
02:00
I'll do that from the command line
02:01
by typing 'unzip protected.zip'.
02:03
It prompts for the password, so I'll type
02:06
in the password that we just cracked.
02:07
I get a message that the file is inflating.
02:10
Let's list the folder contents.
02:12
Now I see another file called password.pdf.
02:16
This is a PDF file that's also
02:17
password-protected, so whoever set this up was
02:20
really concerned about this document's security.
3. Crack a PDF Password
02:23
If this PDF's password is just as weak
02:25
as the first one, we can crack it, too.
02:26
Let's go ahead and do that now.
02:29
Getting the hash from the PDF is pretty much the same
02:32
process as getting the hash from the zipped file.
02:34
Let's type 'pdf2john password.pdf
02:38
> pdfhash' and press Enter.
02:41
Now let's crack the password, just like we did for the
02:44
zipped file password, by typing 'john - -format=pdf
02:49
pdfhash - -wordlist=words.txt' and pressing Enter.
02:54
There's the password!
02:55
It's the word 'secret".
02:56
Let's try it to make sure it works.
02:59
I'll go to my Documents folder and open the PDF.
03:01
It prompts me for a password, so I'll
03:03
type in 'secret', and my file opens up.
4. Summary
03:06
And that's all there is to it.
03:07
In this demo, we talked about extracting
03:10
hashes from password-protected files.
03:12
We extracted hashes from a zip file and then a PDF file.
03:16
Then we used John the Ripper to crack those hashes.