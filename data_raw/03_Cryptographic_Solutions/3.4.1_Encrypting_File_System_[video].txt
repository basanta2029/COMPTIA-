Click one of the buttons to take you to that part of the video.


Encrypting File System (EFS) 00:00-00:25

Microsoft's Encrypting File System, or EFS, was introduced with NTFS version 3 and has been included in every version of Windows since Windows 2000, except for in the Home editions.

EFS makes it simple for users to encrypt files on their Windows systems.

In this lesson, we'll look at the EFS encryption process, recovering data, and some security considerations with EFS.

EFS Encryption Process 00:25-01:25

EFS combines the speed of symmetric encryption with the convenience of asymmetric encryption.

However, keep in mind that EFS is used to encrypt individual files or folders on the system, not the entire drive. You would have to use BitLocker for that.

When you want to encrypt a file, Windows generates a pseudo-random number called the File Encryption Key, or FEK. Windows uses the FEK with the AES encryption algorithm to encrypt the file.

To further protect everything, the FEK is then encrypted using the user's public key and stores the encrypted FEK in the file's header in a special location called the Data Decryption Field, or DDF.

The decryption process is just the opposite.

The user's private key is used to first unlock the DDF and get the FEK. The FEK is then used to decrypt the file.

By combining the security of the symmetric keys and the convenience of the asymmetric keys, Microsoft has made it easy for users to encrypt their data.

Recovering Data 01:25-02:29

By default, the only user that can decrypt files is the user who encrypted them. If that user account becomes corrupted somehow or the password is forgotten, any encrypted files are lost. To prevent this, we need to setup a Data Recovery Agent, or DRA.

The Data Recovery Agent, or DRA, is simply another account that can decrypt data that's been encrypted by other users on a Windows operating system.

In older versions of Windows, the system administrator was automatically configured as the DRA, but in newer versions, the DRA is not automatically defined.

Instead, you have to go into Group Policy on the local computer to setup the DRA.

When working on a Domain network, the DRA is defined in Active Directory.

Keeping the decryption keys safe is vital to protecting your data and being able to access it when needed.

To do this, you can backup the decryption keys to a USB drive. Then, if something catastrophic happens to the Windows system, you still have access to the files, you'll be able to decrypt the files using the backup of the decryption keys.

Security Considerations 02:29-03:26

When using EFS, there are some security issues you need to keep in mind, such as what happens when files are moved.

If you move or copy an encrypted file to a different location on the same partition, or to another NTFS partition, your file will stay encrypted.

However, if you move or copy a file to a FAT based partition, the file will be decrypted automatically, as these file systems don't support encryption.

We need to be careful with this because by default, USB drives are formatted with the FAT32 or exFAT file systems as these are most compatible with other operating systems.

When you copy an encrypted file over, you won't be notified that the file is decrypted. This can lead to some serious security issues.

The other security concern is that the user's private key is protected only by their password. If the user has a weak password and the system is compromised, all encrypted files are vulnerable. It's absolutely vital that users have strong passwords and follow proper password security protocols.

Summary 03:26-03:48

That's it for this lesson.

In this lesson we discussed EFS and how the encryption process works.

We then looked at why a Data Recovery Agent should be created so there's a second account that can access encrypted files in case something happens.

And finally, we reviewed some security considerations with EFS including moving encrypted files and using strong passwords.